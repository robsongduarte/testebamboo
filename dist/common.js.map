{"version":3,"sources":["webpack:///./src/app/service/designacoes/designacao.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAkE;AACvB;AACkB;AACxB;AAEA;AAKrC,IAAM,WAAW,GAAG;IAClB,OAAO,EAAE,IAAI,gEAAW,CAAC;QACvB,cAAc,EAAE,kBAAkB;KACnC,CAAC;CACH,CAAC;AAKF;IAOE,2BAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAL5B,QAAG,GAAW,qEAAW,CAAC,eAAe,CAAC;QAEjC,QAAG,GAAG,IAAI,CAAC,GAAG,GAAC,2BAA2B,CAAC;QAI1D,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IAEnC,CAAC;IAEC,oCAAQ,GAAR;IAEA,CAAC;IAEH,gCAAI,GAAJ,UAAK,UAAkB;QACrB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAc,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,YAAY,GAAG,UAAU,CAAC,CAAC;aAC1E,IAAI,CACH,0DAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CACjB,CAAC;IACN,CAAC;IAED,gEAAoC,GAApC,UAAqC,WAAmB,EAAE,SAAiB,EAAE,OAAe,EACxF,iBAAyB,EAAE,eAAuB;QACpD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,4BAA4B,GAAC,WAAW,GAAC,WAAW,GAAC,SAAS,GAAC,SAAS,GAAC,OAAO;YAChF,kBAAkB,GAAC,iBAAiB,GAAC,iBAAiB,GAAC,eAAe,CAAC,CAAC;aACvF,IAAI,CAAC,0DAAG,CAAC,UAAC,MAAU;YACnB,IAAG,MAAM,IAAI,IAAI,EAAE;gBACjB,OAAO,IAAI,CAAC;aACb;YACD,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC;QAClC,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAED,oCAAQ,GAAR,UAAS,EAAU;QACjB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;aACnB,IAAI,CAAC,0DAAG,CAAC,UAAC,MAAU;YACnB,IAAG,MAAM,IAAI,IAAI,EAAE;gBACjB,OAAO,IAAI,CAAC;aACb;YACD,OAAO,MAAM,CAAC,UAAU,CAAC;QAC3B,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAED,gCAAI,GAAJ,UAAK,SAAoB;QACvB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAY,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IACxD,CAAC;IAED,yCAAa,GAAb,UAAc,KAAa,EAAE,QAAgB,EAAE,OAAe;QAC5D,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAiB,IAAI,CAAC,GAAG,cAAW,EAAE;YACzD,KAAK;YACL,QAAQ;YACR,OAAO;YACP,QAAQ,EAAE,CAAC;oBACT,KAAK,EAAE,uBAAuB;oBAC9B,YAAY,EAAE,eAAe;oBAC7B,cAAc,EAAE,eAAe;iBAChC,CAAC;SACH,CAAC;IACJ,CAAC;IA9DU,iBAAiB;QAH7B,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAQ0B,+DAAU;OAPzB,iBAAiB,CAgE7B;IAAD,wBAAC;CAAA;AAhE6B","file":"common.js","sourcesContent":["import { environment } from './../../../environments/environment';\r\nimport { Injectable } from '@angular/core';\r\nimport {HttpClient, HttpHeaders} from \"@angular/common/http\";\r\nimport { tap } from \"rxjs/operators\";\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Designado } from '../../model/designado';\r\nimport { Designacao } from '../../model/designacao';\r\nimport { Auditoria } from '../../shared/components/historico/model/auditoria.model'\r\n\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({\r\n    'Content-Type': 'application/json'\r\n  })\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DesignacaoService {\r\n\r\n  private url: string = environment.url_designacoes;\r\n\r\n  private readonly API = this.url+'/api/govc/v1/designacoes/';\r\n\r\n\r\n  constructor(private http: HttpClient) {\r\n    console.log('DesignacaoService');\r\n\r\n  }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n  list(termoBusca: string) {\r\n    return this.http.get<Designado[]>(this.API.concat('find?name=' + termoBusca))\r\n      .pipe(\r\n        tap(console.log)\r\n      );\r\n  }\r\n\r\n  allaByDesignadoAndEmpresaAndVigencia(nmDesignado: string, cdEmpresa: string, cdNivel: string,\r\n      dtVigenciaInicial: string, dtVigenciaFinal: string): Observable<Designado[]> {\r\n    return this.http.get<Designado[]>(\r\n      this.API.concat('find-designados/designado/'+nmDesignado+'/empresa/'+cdEmpresa+'/nivel/'+cdNivel+\r\n                      '/inicioVigencia/'+dtVigenciaInicial+'/finalVigencia/'+dtVigenciaFinal))\r\n      .pipe(map((result:any)=>{\r\n        if(result == null) {\r\n          return null;\r\n        }\r\n        return result._embedded.content;\r\n      }));\r\n  }\r\n\r\n  findById(id: string) : Observable<Designado> {\r\n    return this.http.get<Designado>(\r\n      this.API.concat(id))\r\n      .pipe(map((result:any)=>{\r\n        if(result == null) {\r\n          return null;\r\n        }\r\n        return result.designacao;\r\n      }));\r\n  }\r\n\r\n  save(designado: Designado): Observable<Designado> {\r\n    return this.http.post<Designado>(this.API, designado);\r\n  }\r\n\r\n  findAuditoria(table: string, idColumn: string, idValue: string): Observable<Auditoria[]> {\r\n    return this.http.post<Auditoria[]>(`${this.API}auditoria`, {\r\n      table,\r\n      idColumn,\r\n      idValue,\r\n      children: [{\r\n        table: 'govc_designacao_nivel',\r\n        columnParent: 'cd_designacao',\r\n        columnChildren: 'cd_designacao'\r\n      }]\r\n    })\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}